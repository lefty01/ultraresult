#!/usr/bin/perl


use strict;
use warnings;


my $num_vps = 8; # 1-7, 8=ziel
my $runner_start = 0;
my $vp = 0;

my $VP;
for ($VP=1; $VP<=$num_vps; $VP++) {
    my $off = $VP - 1;

    print "\nopen file: vp$VP.result\n";

    open(my $fh, ">", "vp$VP.result")
	or die "cannot open > vp$VP.result: $!";

    my $data_pos = tell DATA; # save the position
    #print while (<DATA>);


    while(<DATA>) {
	print;
	next unless /^\d/;

	if (m/^(\d{1,2})$/) {
	    print "$1,";
	    print $fh "$1,";
	    $runner_start = 1;
	    $vp = 0;
	}

	my $in;
	if (m/^(\d\d:\d\d)$/) {
	    $in = $1;
	    $vp++;
	}
	print "VP=$VP, off=$off, vp=$vp\n";

	if ($VP+$off == $vp) { # 1,3,5,...,15
	    #if (m/^(\d\d:\d\d)$/) {
	    #	$in = $1;
	    #}
	    print "$in,";
	    print $fh "$in,";
	}
	if (($VP+$off+1) == $vp) { # 2,4,6,..,16
	    #if (m/^(\d\d:\d\d)$/) {
	    # $in = $1;
	    #}
	    print "$in,1,1;";
	    print $fh "$in,1,1;";
	    $runner_start = 0;
	}

    }
    seek DATA, $data_pos, 0;  # reposition the filehandle right past __DATA__
}



__DATA__

1
10:14
10:17
12:58
13:08
15:50
15:57
18:52
19:05
21:24
21:44
00:50
01:08
04:38
04:50
07:16
23:16

2
10:14
10:17
12:45
12:53
15:50
15:57
18:52
19:05
21:23
21:44
00:48
01:08
04:38
04:50
07:16
23:16

3
10:14
10:16
12:50
12:58
15:39
15:43
18:42
18:52
21:45
21:56
01:28
01:33
04:38
04:50
07:16
23:16

4
10:14
10:16
12:51
12:59
15:52
15:58
18:52
19:05
21:23
21:43
00:50
01:08
04:38
04:50
07:16
23:16

5
10:40
10:44
13:40
13:55
17:02
17:15
20:34
20:50
23:29
23:53
03:30
03:52
08:04
08:16
10:07
26:07

6
10:40
10:44
13:38
13:55
17:02
17:14
20:33
20:50
23:29
23:53
03:30
03:52
08:04
08:16
10:07
26:07

7
10:40
10:44
13:40
13:55
17:02
17:14
20:33
20:50
23:29
23:53
03:30
03:52
08:04
08:16
10:07
26:07

8
10:40
10:44
13:40
13:55
17:02
17:15
20:34
20:50
23:29
23:53
03:30
03:52
08:04
08:16
10:07
26:07

9
11:00
11:03
14:35
14:58
18:26
18:35
22:04
22:16
00:43
00:46
04:30
04:41
09:05
09:10
10:52
26:52

10
10:28
10:31
14:17
14:30
18:02
18:08
21:55
22:03
01:01
01:23
05:30
05:45
09:40
09:50
11:45
27:45

11
11:05
11:12
14:42
15:02
18:28
18:42
22:27
22:45
01:57
02:32
06:15
06:30
10:00
10:12
12:05
28:05

12
11:05
11:12
14:42
15:02
18:28
18:42
22:27
22:45
01:57
02:32
06:15
06:30
10:00
10:12
12:05
28:05

13
11:01
11:12
14:36
14:52
18:28
18:42
22:27
22:45
01:57
02:32
06:16
06:35
10:30
10:34
12:35
28:35

14
10:28
10:40
13:50
14:22
17:48
18:12
22:04
22:51
01:28
02:03
06:15
06:40
10:26
10:43
12:50
28:50

15
11:00
11:03
14:35
14:58
18:27
18:36
22:04
22:16
01:29
02:03
06:15
06:30
10:30
10:43
12:50
28:50

16
10:36
10:40
14:00
14:25
17:50
18:12
22:04
22:21
01:29
02:03
06:10
06:40
10:26
10:43
12:50
28:50

17
10:30
10:40
13:55
14:22
17:50
18:12
22:04
22:21
01:30
02:03
06:15
06:40
10:30
10:43
12:50
28:50

18
10:30
10:40
13:50
14:22
17:48
18:12
22:04
22:21
01:29
02:03
06:10
06:40
10:26
10:43
12:50
28:50

19
10:40
10:43
13:38
14:03
17:14
17:23
21:17
21:27
01:01

20
10:40
10:43
13:38
13:55
17:14
17:23
21:17
21:27
01:01
01:17

21
10:40
10:44
13:38
13:55
17:02
17:14
20:33
20:50
23:29

22
10:30
10:40
13:39

23
10:30
10:40
13:39

24
10:30
10:40
13:39
13:55
17:02
17:14
20:33
20:50
23:29

25
10:30
10:40
13:39

26
10:30
10:40
13:39

27
10:30
10:40
13:39

28
10:30
10:40
13:39

29
10:30
10:40
13:39

30
10:30
10:40
13:39
